# 📖 마님(NarrationAgent) 기획서

## 1. 개요
**마님(NarrationAgent)**은 Effect Stokes 시스템 내에서 VFX 시뮬레이션과 직접 연결된 수학/물리 공식을 해설하는 에이전트입니다. 목표는 단순한 '자막 내레이션'을 넘어, **시청자가 VFX에 사용된 수식을 직관적으로 이해할 수 있도록 돕는 설명자** 역할을 수행하는 것입니다.

---

## 2. 주요 목적
1. **수식 이해 지원**: 복잡한 물리/수학 공식을 애니 장면과 연결지어 쉽게 풀어 설명.
2. **교육+엔터테인먼트 결합**: 학술적 개념을 ‘애니식 스토리텔링’으로 풀어내 흥미 유발.
3. **VFX-수식 연동**: 마님의 설명과 동시에 해당 수식이 시각적으로 VFX로 표현되어 학습 효과 강화.

---

## 3. 기능 설계
### 입력
- StyleAgent 또는 사용자가 제공한 **텍스트 설명/수식**
- 오케스트레이터에서 전달받는 **시뮬레이션 파라미터**

### 내부 처리
1. **스크립트 생성**
   - LLM을 통해 전달받은 수식을 해설용 내레이션으로 변환.
   - 톤: 지혜로운 ‘선생+해설자’ 느낌.
   - 예: “이건 단순한 주기 함수일세. 푸리에 변환을 하면 패턴이 훤히 드러난다네.”

2. **TTS 변환**
   - 대본을 음성으로 변환하여 `.mp3` 또는 `.wav` 파일 생성.

3. **자막(SRT) 생성**
   - 내레이션 텍스트를 타임코드 기반 자막 파일로 자동 변환.

### 출력
- **오디오 파일** (해설 음성)
- **자막 파일** (SRT)
- **보조 텍스트 데이터** (추가 그래프/수식 이미지 오버레이용)

### 3.4 기술적 도전 과제 및 처리 방안

**1. StyleAgent의 자연어 → 수식/파라미터 추출 정확도**
*   **도전 과제**: 사용자의 모호하거나 비정상적인 자연어 설명에서 시뮬레이션에 필요한 정확한 수학식과 파라미터를 추출하는 것은 매우 어렵습니다. LLM의 '환각(hallucination)' 현상이나 오해석 가능성이 존재합니다.
*   **처리 방안**:
    *   **프롬프트 엔지니어링 강화**: LLM에 명확하고 구체적인 지시를 제공하여 수식 추출의 정확도를 높입니다. (예: "다음 텍스트에서 물리량을 추출하고, 해당 물리량에 대한 표준 수학 기호와 단위를 사용하여 수식을 작성해줘.")
    *   **피드백 루프 구축**: StyleAgent의 추출 결과에 대해 사용자 또는 ParamEvaluator로부터 피드백을 받아 LLM의 성능을 지속적으로 개선합니다.
    *   **확률적 해석 및 다중 제안**: 모호한 입력에 대해 여러 가지 가능한 수식/파라미터 조합을 제안하고, 사용자에게 선택권을 주거나 가장 확률 높은 것을 우선 적용합니다.
    *   **사전 정의된 수식 라이브러리 활용**: 자주 사용되는 수식(예: 푸리에 변환, 주기 함수)은 미리 정의된 라이브러리에서 매칭하여 정확도를 높입니다.

**2. NarrationAgent의 수식 해설의 정확성 및 톤 유지**
*   **도전 과제**: StyleAgent로부터 전달받은 수식을 오해 없이 정확하게 해설하면서도, '지혜로운 해설자, 교육+밈'이라는 독특한 톤을 유지하는 것이 어렵습니다. 특히 복잡한 수식의 경우, 잘못된 비유나 설명으로 인해 정보의 왜곡이 발생할 수 있습니다.
*   **처리 방안**:
    *   **톤 가이드라인 강화**: LLM 프롬프트에 마님의 페르소나와 톤에 대한 구체적인 가이드라인과 예시를 포함하여 일관성을 유지합니다.
    *   **사실 확인 메커니즘**: 생성된 내레이션 스크립트가 수식의 수학적/물리적 의미를 정확하게 반영하는지 검증하는 내부 메커니즘(예: 간단한 수식 검증 모듈)을 도입합니다.
    *   **비유/밈 데이터베이스**: 교육적 비유나 밈 요소를 활용할 수 있는 데이터베이스를 구축하여 LLM이 이를 참조하도록 유도합니다. (예: "무잔의 회전 공격"과 같은 예시)
    *   **사용자 피드백 반영**: 내레이션의 정확성 및 재미에 대한 사용자 피드백을 수집하여 LLM의 학습 데이터로 활용합니다.

---

## 4. 시스템 통합
- Orchestrator가 마님을 Simulation/Render 파이프라인과 병렬 실행.
- 최종 RenderAgent 단계에서:
  - 마님 오디오 → 영상에 배경 내레이션 삽입.
  - 마님 자막 → 영상 하단에 오버레이.
- 결과물: **VFX + 해설 + 자막이 결합된 완성 영상**

---

## 5. 활용 시나리오
1. **귀멸의 칼날: 무잔 회전 공격**
   - 수식: 3D 주기 함수, 푸리에 변환.
   - 마님: “호흡법이니 검술이니 하지만, 결국 단순한 반복 신호일세.”
   - VFX: 회전 궤적 + FFT 그래프 + 카운터 타이밍 폭발.

2. **나루토: 키바의 아통아**
   - 수식: 원통 좌표계의 회전 운동 + 난류 시뮬레이션.
   - 마님: “원통 속의 바람이 꼬이듯, 이 기술도 난류의 흐름을 따르는 법이지.”
   - VFX: 회오리 리본 시뮬레이션.

3. **드래곤볼: 기공파**
   - 수식: 맥스웰 방정식.
   - 마님: “빛과 전기의 파동, 그것이 바로 이 에너지의 근원이라네.”
   - VFX: 전자기파가 퍼져나가는 파동 효과.

---

## 6. 기대 효과
- **차별성**: 단순 VFX 생성기 → “수식을 시각화하는 AI 해설 시스템”으로 진화.
- **교육성**: 수학과 물리 개념을 대중 친화적으로 전달.
- **콘텐츠 확장성**: 다양한 애니/게임/과학적 장면에 적용 가능.

---

## 7. 향후 발전 방향
- 멀티언어 해설 지원 (영어, 일본어 등 글로벌 확장).
- 감정 TTS (흥분/차분 톤) 적용.
- 시청자 입력 기반 Q&A 모드: “이 수식은 왜 이렇게 되나요?” → 마님이 답변.

---

✅ 결론: **마님 Agent는 Effect Stokes의 ‘설명자 모듈’로서, 수식과 VFX를 연결하는 핵심 다리**가 된다.

