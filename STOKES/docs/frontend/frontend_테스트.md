# 프론트엔드 테스트 정의서 (Frontend Test Definitions)

## 1. 테스트 환경 (Test Environment)

*   **개발 환경:** 로컬 개발 환경 (Python 가상 환경, Node.js 환경)
*   **테스트 도구:**
    *   **백엔드 (Flask):** `pytest`, `requests` (API 테스트용)
    *   **프론트엔드 (React):** `Jest`, `React Testing Library` (단위/통합 테스트), `Cypress` 또는 `Playwright` (E2E 테스트 - 추후 결정)
    *   **API Curl 테스트:** `curl` 또는 `Postman`/`Insomnia`
    *   **비디오 합성:** `FFmpeg` (설치 및 경로 확인)

## 2. 테스트 유형 및 전략 (Test Types & Strategies)

### 2.1. API Curl 테스트 (Backend API Curl Tests)

백엔드 API 엔드포인트의 기본 동작 및 응답을 수동 또는 스크립트를 통해 검증합니다.

*   **목표:** API 엔드포인트의 가용성, 요청/응답 형식의 유효성, 기본 기능 동작 확인.
*   **테스트 시나리오:**
    *   **파이프라인 실행 (`/api/run_pipeline`):**
        *   **성공 케이스:** 유효한 `simulation_params` 및 `visualization_params`를 포함한 POST 요청. `status: "success"` 및 `message` 확인.
        *   **실패 케이스 (유효성 검사):** 필수 파라미터 누락, 잘못된 파라미터 타입, 유효하지 않은 파라미터 값 (예: `time_steps`에 문자열 입력, `grid_resolution` 범위 초과). `status: "error"`, `message`, `details` 확인.
    *   **비디오 합성 (`/api/synthesize_video`):**
        *   **성공 케이스:** 유효한 `image_sequence_path`, `output_video_name`, `fps`를 포함한 POST 요청. `status: "success"` 및 `video_url` 확인.
        *   **실패 케이스:** 존재하지 않는 `image_sequence_path`, 잘못된 `fps` 값.
    *   **파이프라인 중단 (`/api/stop_pipeline`):**
        *   **성공 케이스:** POST 요청. `status: "success"` 확인. (실행 중인 파이프라인이 있을 때와 없을 때 모두 테스트)
    *   **결과 이미지 제공 (`/api/results/<output_dir_name>/<filename>`):**
        *   **성공 케이스:** 유효한 이미지 경로로 GET 요청. 이미지 파일이 올바르게 반환되는지 확인.
        *   **실패 케이스:** 존재하지 않는 이미지 경로로 GET 요청. `404 Not Found` 응답 확인.

### 2.2. 모듈 테스트 (Module Tests)

백엔드(Flask) 및 프론트엔드(React)의 개별 컴포넌트 또는 함수 단위의 동작을 검증합니다.

*   **목표:** 각 모듈의 기능적 정확성, 예상치 못한 입력에 대한 견고성 확인.
*   **백엔드 (Flask):**
    *   **테스트 대상:**
        *   파라미터 유효성 검사 로직 (`utils.py` 또는 `validation.py` 모듈).
        *   `subprocess`를 통한 파이프라인 실행 및 출력 파싱 로직.
        *   Socket.IO 이벤트 전송 로직.
        *   FFmpeg 호출 및 비디오 합성 로직.
    *   **테스트 도구:** `pytest`
*   **프론트엔드 (React):**
    *   **테스트 대상:**
        *   파라미터 입력 폼 컴포넌트 (상태 관리, 입력 변경, 유효성 피드백).
        *   로그 표시 컴포넌트 (실시간 업데이트, 스크롤 동작).
        *   결과 이미지 갤러리 컴포넌트 (이미지 로드, 탐색).
        *   API 호출 및 Socket.IO 이벤트 수신 로직.
    *   **테스트 도구:** `Jest`, `React Testing Library`

### 2.3. E2E 테스트 (End-to-End Tests)

사용자 관점에서 전체 시스템의 흐름을 검증합니다. 프론트엔드와 백엔드가 통합된 상태에서 실제 사용자 시나리오를 모방합니다.

*   **목표:** 시스템의 주요 기능이 처음부터 끝까지 올바르게 작동하는지 확인.
*   **테스트 시나리오:**
    *   웹 UI에 접속하여 모든 파라미터 입력 폼이 올바르게 렌더링되는지 확인.
    *   유효한 파라미터를 입력하고 "실행" 버튼 클릭.
    *   실시간 로그가 올바르게 스트리밍되는지 확인.
    *   파이프라인 진행률 표시가 올바르게 업데이트되는지 확인.
    *   파이프라인 완료 후, 결과 이미지 갤러리에 이미지가 올바르게 로드되는지 확인.
    *   (선택 사항) 비디오 합성 기능 테스트 및 비디오 재생 확인.
    *   (선택 사항) "중지" 버튼 클릭 시 파이프라인이 올바르게 중단되는지 확인.
*   **테스트 도구:** `Cypress` 또는 `Playwright`

### 2.4. 시나리오 테스트 (Scenario Tests)

특정 비즈니스 로직 또는 복잡한 사용자 흐름을 검증합니다. 실제 사용자가 겪을 수 있는 다양한 상황을 가정하여 테스트합니다.

*   **목표:** 시스템이 다양한 입력과 조건 하에서 예상대로 동작하는지 확인.
*   **테스트 시나리오:**
    *   **성공 시나리오:**
        *   기본 파라미터로 시뮬레이션 실행 및 결과 확인.
        *   `time_steps`를 최대로 설정하여 장시간 렌더링 테스트.
        *   `initial_shape_type`을 변경하며 여러 유형의 VFX 생성 및 결과 비교.
        *   `emission_strength`와 `transparency_alpha`를 조절하며 재질 변화 확인.
    *   **실패 시나리오:**
        *   유효하지 않은 파라미터(예: `viscosity`에 음수) 입력 시 시스템의 에러 처리 및 프론트엔드 피드백 확인.
        *   Blender 실행 경로 오류 등 파이프라인 내부 오류 발생 시 백엔드 및 프론트엔드의 에러 처리 확인.
        *   네트워크 연결 불안정 시 Socket.IO 재연결 및 로그 복구 동작 확인.
    *   **중단 시나리오:**
        *   파이프라인 실행 중 "중지" 버튼 클릭 시, 파이프라인이 안전하게 종료되고 프론트엔드 상태가 올바르게 업데이트되는지 확인.

## 3. 테스트 보고 (Test Reporting)

*   각 테스트 유형별로 테스트 실행 결과(성공/실패, 오류 메시지)를 명확히 기록합니다.
*   자동화된 테스트의 경우, CI/CD 파이프라인에 통합하여 자동으로 테스트를 실행하고 결과를 보고하도록 설정합니다.

## 4. 승인 (Approval)

위 테스트 정의에 대해 검토해주시고, 승인해주시면 다음 단계인 구현을 진행하겠습니다.