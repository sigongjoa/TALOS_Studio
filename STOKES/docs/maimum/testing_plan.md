# 🧪 Effect Stokes + 마님 시스템 테스트 정의

## 1. 테스트 목적
본 테스트 정의의 목표는 **Effect Stokes 시스템과 NarrationAgent(마님)**이 올바르게 동작하는지 검증하고, 각 모듈 간의 연동이 기대대로 수행되는지 확인하는 것이다. 이를 통해 **정확성, 안정성, 확장성**을 보장한다.

---

## 2. 테스트 범위
- **단위 테스트(Unit Test)**: 개별 모듈 기능 검증
- **통합 테스트(Integration Test)**: 모듈 간 데이터 전달 및 연동 검증
- **시스템 테스트(System Test)**: 전체 파이프라인이 입력 → 출력으로 정상 동작하는지 확인
- **사용자 테스트(User Test)**: 실제 사용자가 시나리오 기반으로 시스템을 이용할 때 만족도와 이해도를 측정

---

## 3. 테스트 항목 정의

### 3.1 StyleAgent 테스트
- 입력: 텍스트 설명 → 출력: 파라미터/수식
- 검증 항목:
  - 올바른 파라미터 범위 생성 여부
  - 수식 변환 정확성
  - 비정상 입력(에러 처리)

### 3.2 ParamEvaluator 테스트
- 입력: 수식 문자열 → 출력: 계산 결과
- 검증 항목:
  - 안전한 실행(허용되지 않은 연산 차단)
  - 계산 정확성 (예: sin, cos, FFT 결과)

### 3.3 NarrationAgent(마님) 테스트
- 입력: 수식, 파라미터
- 출력: 내레이션 텍스트, TTS 오디오, SRT 자막
- 검증 항목:
  - 내레이션 텍스트 품질(명확성, 톤)
  - TTS 파일 정상 생성 여부
  - 자막 싱크 정확성

### 3.4 SimulationAgent & FluidSimulator 테스트
- 입력: 파라미터(JSON)
- 출력: 시뮬레이션 데이터
- 검증 항목:
  - 시뮬레이션 안정성 (수치 발산 여부)
  - 파라미터 반영 정확성
  - 데이터 형식 일관성

### 3.5 RenderAgent 테스트
- 입력: 시뮬레이션 데이터 + 그래프 이미지
- 출력: 최종 영상 파일
- 검증 항목:
  - Blender 렌더링 정상 완료 여부
  - FFmpeg 영상 합성 정확성
  - 영상 품질 및 FPS 유지

### 3.6 Orchestrator 테스트
- 입력: 사용자 입력
- 출력: 최종 합성 쇼츠 영상
- 검증 항목:
  - 전체 모듈 호출 순서의 정확성
  - 오류 발생 시 예외 처리 로직 작동 여부
  - 최종 결과물 품질 (영상+해설+자막 동기화)

---

## 4. 테스트 방법론
- **자동화 테스트**: pytest 기반 단위/통합 테스트 스크립트 작성
- **샘플 시나리오 테스트**: “무잔 회전 → 푸리에 변환 → 카운터 타이밍” 입력으로 파이프라인 검증
- **성능 테스트**: 시뮬레이션 대규모 데이터 처리 시간 측정
- **사용자 테스트**: 설문/피드백 기반 UX 평가

---

## 5. 기대 효과
- 시스템 신뢰성 강화
- 개발 단계에서 조기 오류 발견
- 실제 사용자에게 전달되는 영상의 **일관성, 품질, 교육적 가치** 보장

---

✅ 결론: 본 테스트 정의는 Effect Stokes + 마님 시스템이 **기술적/콘텐츠적 품질**을 동시에 확보하기 위한 기준을 제공한다.